<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Codewars API</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            margin: 0;
        }

        .container {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: green;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #007bff;
            color: white;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        .rank {
            font-weight: bold;
        }

        /* Material Design-style buttons */
        .md-btn {
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 10px 20px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
        }
        .mdd-btn{
            background-color: #b57b2bb4;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 10px 20px;
            cursor: pointer;
            margin: 5px 5px 15px 5px;
            font-size: 16px;
        }

        /* Add hover effect to buttons */
        .md-btn:hover {
            background-color: #0056b3;
        }

        /* Loader */
        .loader {
            display: none;
            text-align: center;
        }

        .loader i {
            font-size: 48px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Codewars Users Stats</h1>
        <div class="loader">
            <i class="material-icons">autorenew</i>
            <p>Loading...</p>
        </div>
        <div style="text-align: center; margin-bottom: 20px;">
            
            <button class="md-btn" id="class1Btn">SS 01</button>
            <button class="md-btn" id="class2Btn">SS 02</button>
            <button class="md-btn" id="class3Btn">SS 03</button>
            <button class="md-btn" id="class4Btn">SS 04</button>
            <button class="md-btn" id="class5Btn">SS 05</button>
            <br>
            <button class="md-btn" id="class6Btn">SS 06</button>
            <button class="md-btn" id="class7Btn">SS 07</button>
            <button class="md-btn" id="class8Btn">SS 08</button>
            <button class="md-btn" id="class9Btn">SS 09</button>
            <button class="md-btn" id="class10Btn">SS 10</button>
            <br>
            <button class="md-btn" id="class11Btn">SS 11</button>
            <button class="md-btn" id="class12Btn">SS 12</button>
            <button class="md-btn" id="class13Btn">SS 13</button>
            <button class="md-btn" id="class14Btn">ALL</button>
            
        </div>
        <div style="text-align: center;">
            <button class="mdd-btn" id="sortTodayBtn">Sort by Today</button>
            <button class="mdd-btn" id="sortTotalBtn">Sort by Total</button>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Total Challenges</th>
                    <th>Today completed</th>
                    <th>Latest Challenge Completed</th>
                </tr>
            </thead>
            <tbody id="user-list">
                <!-- User Stats will be added here -->
            </tbody>
        </table>
    </div>

    <script>
        var SS1 = {
"Muhammed Basheer K": "basheeromy",
"Muhammed Hisham Dulfacker": "dulfackerhisham",
"Muhammed Shaheer": "Shaheeerr",
"Nizam K": "nizamkarippal",
};

var SS2 = {
"Abhishek P": "abhishekpclt",
"Aflah Ahamed P M": "AflahAhamed00",
"Amrutha M": "Amrytha%20Muraleedharan",
"Deepasree A": "Deepasree",
"Muhammed Fayiz": "Muhammed%20Fayiz",
"Muhammed Hadiq Jazar K P": "hadik987",
"Muhammed Safvan K V": "MSAFVANKV",
"Muhammed Shafeeq K": "shafeeeque",
"Nashva K": "Nashva%20k",
"Rahul P": "rahulsvaz",
"Sarath Das": "Sarathdaskv"
};

var SS3 = {
"Ajin E M": "Ajin_em",
"Ansiya Banu P": "GtHubproject",
"Muhammed Althaf C": "ALTHAF397",
"Nishadali A": "Nishad6767",
"Shakeer K": "shakeerk123",
"Suhail Paredath": "Suhail.P"
};
var SS4 = {
"Munavar Ali M": "munawaralimangat",
"Radhadevan Erat": "Deverat",
};
var SS5 = {
"Abhijith Nellikkat": "AbhijithNellikkat",
"Aswindas C V": "ASWINDAS",
"Mohammed Niyas N": "NIYASNY",
"Premnadh B R": "premnadhbr",
"Vyshnav A": "Vyshnav67"
};
var SS6 = {
"Subin Sundar K V": "Subin%20Sundar%20Kv",
"Rohith Krishna P": "rohithkrishna",
};

var SS7 = {
"Abdu Raheem P": "raheempt",
"Jithinraj P": "JithinRaj.P",
"Athul Krishna B K": "athulbk"
};

var SS8 = {
"Adila Millath C": "adila%20millath",
"Afaf Perincheeri": "Afaf997",
"Afsal K P": "Afsalkp7",
"Anurag P": "Anurag%20%20p",
"Jeeva M K": "Jeevamk",
"Muhammad Nishmal P": "Its-me-nishmal",
"Muhammed Fayis C M": "Muhammed%20%20%20fayis%20%20%20CM",
"Amal Nath V S": "AmalNath-VS",
"Rifna C": "Rifna",
};

var SS9 = {
"Abdul Bari KT": "Abdulbarikt",
"Afsal Rahman MP": "Afsalmp",
"Kirshnadas P": "Krishnadas3"
};

var SS10 = {
'Arunjith S': "arunjithsurendran22",
'SALMANUL FARIS CK': "salmanck66",
'Aswin Pk': "aswin22244",
'Arafath C T K': "arafu13",
'KIRAN S': "kirans2255",
'SUBIN TM': "SUBHIN-TM",
'Muhammed Midlaj': "midu-zack"
};

var SS11 = {
'Jeevan Abraham Joji': "jeevan-aj",
'Abhinav B Manoj': "Abhinav B Manoj",
'Hamim Thoyyib': "HAMIM THOYYIB",
'Rohith c v': "devzrohith"
};

var SS12 = {
'Muhammed Minhaj Kc': "minhajkc",
'Muhammed Fahiz K': "fahiz",
'Muhammed Ajmal': "ajmal1722"
};

var SS13 = {
'Hadiya': "hadiya",
"Muhammed shadil k": "shadil220"
};

var all = {
    "Muhammed Basheer K": "basheeromy",
"Muhammed Hisham Dulfacker": "dulfackerhisham",
"Muhammed Shaheer": "Shaheeerr",
"Nizam K": "nizamkarippal",
    "Abhishek P": "abhishekpclt",
"Aflah Ahamed P M": "AflahAhamed00",
"Amrutha M": "Amrytha%20Muraleedharan",
"Deepasree A": "Deepasree",
"Muhammed Fayiz": "Muhammed%20Fayiz",
"Muhammed Hadiq Jazar K P": "hadik987",
"Muhammed Safvan K V": "MSAFVANKV",
"Muhammed Shafeeq K": "shafeeeque",
"Nashva K": "Nashva%20k",
"Rahul P": "rahulsvaz",
"Sarath Das": "Sarathdaskv",
    "Ajin E M": "Ajin_em",
"Ansiya Banu P": "GtHubproject",
"Muhammed Althaf C": "ALTHAF397",
"Nishadali A": "Nishad6767",
"Shakeer K": "shakeerk123",
"Suhail Paredath": "Suhail.P",
    "Munavar Ali M": "munawaralimangat",
"Radhadevan Erat": "Deverat",
    "Abhijith Nellikkat": "AbhijithNellikkat",
"Aswindas C V": "ASWINDAS",
"Mohammed Niyas N": "NIYASNY",
"Premnadh B R": "premnadhbr",
"Vyshnav A": "Vyshnav67",
    "Subin Sundar K V": "Subin%20Sundar%20Kv",
"Rohith Krishna P": "rohithkrishna",
    "Abdu Raheem P": "raheempt",
"Jithinraj P": "JithinRaj.P",
"Athul Krishna B K": "athulbk",
    "Adila Millath C": "adila%20millath",
"Afaf Perincheeri": "Afaf997",
"Afsal K P": "Afsalkp7",
"Anurag P": "Anurag%20%20p",
"Jeeva M K": "Jeevamk",
"Muhammad Nishmal P": "Its-me-nishmal",
"Muhammed Fahim K P": "muhammmedfahim4321",
"Muhammed Fayis C M": "Muhammed%20%20%20fayis%20%20%20CM",
"Amal Nath V S": "AmalNath-VS",
"Rifna C": "Rifna",
    "Abdul Bari KT": "Abdulbarikt",
"Afsal Rahman MP": "Afsalmp",
"Kirshnadas P": "Krishnadas",
    'Arunjith S': "arunjithsurendran22",
'SALMANUL FARIS CK': "salmanck66",
'Aswin Pk': "aswin22244",
'Arafath C T K': "arafu13",
'KIRAN S': "kirans2255",
'SUBIN TM': "SUBHIN-TM",
'Muhammed Midlaj': "midu-zack",
    'Jeevan Abraham Joji': "jeevan-aj",
'Abhinav B Manoj': "Abhinav B Manoj",
'Hamim Thoyyib': "HAMIM THOYYIB",
'Rohith c v': "devzrohith",
    'Muhammed Minhaj Kc': "minhajkc",
'Muhammed Fahiz K': "fahiz",
'Muhammed Ajmal': "ajmal1722",
    'Hadiya': "hadiya",
"Muhammed shadil k": "shadil220"
}
        

        const userItemsContainer = document.getElementById('user-list');
        const sortTodayBtn = document.getElementById('sortTodayBtn');
        const sortTotalBtn = document.getElementById('sortTotalBtn');
        const loader = document.querySelector('.loader');

        const fetchData = async (originalName, username) => {
            // Show loader
            loader.style.display = 'block';

            const userDataResponse = await fetch(`https://www.codewars.com/api/v1/users/${username}`);
            const userData = await userDataResponse.json();

            // Fetch completed challenges data
            const challengesResponse = await fetch(`https://www.codewars.com/api/v1/users/${username}/code-challenges/completed`);
            const challengesData = await challengesResponse.json();

            // Calculate completed challenges today
            const today = new Date().toISOString().split('T')[0];
            const completedToday = challengesData.data.filter(challenge => challenge.completedAt.startsWith(today));

            // Find the latest challenge completed
            const latestChallenge = challengesData.data[0];

            const userItem = `
                <tr>
                    <td>${originalName}</td>
                    <td style="text-align: center; color: GREEN;">${userData.codeChallenges.totalCompleted}</td>
                    <td style="text-align: center; color: GREEN;">${completedToday.length}</td>
                    <td>${latestChallenge ? latestChallenge.name : 'N/A'}</td>
                </tr>`;

            // Hide loader
            loader.style.display = 'none';

            return userItem;
        };

        function loadData(classData) {
            Promise.all(Object.entries(classData).map(([originalName, username]) => fetchData(originalName, username))
            )
            .then((userItems) => {
                userItemsContainer.innerHTML = userItems.join('');
                sortTableByToday(); // Sort by today by default
            })
            .catch((error) => {
                console.error('Error fetching data for users:', error);
            });
        }

        function sortTableByToday() {
            const rows = Array.from(userItemsContainer.children);
            rows.sort((a, b) => {
                const aToday = parseInt(a.children[2].textContent);
                const bToday = parseInt(b.children[2].textContent);
                return bToday - aToday;
            });
            userItemsContainer.innerHTML = '';
            for (const row of rows) {
                userItemsContainer.appendChild(row);
            }
        }

        function sortTableByTotal() {
            const rows = Array.from(userItemsContainer.children);
            rows.sort((a, b) => {
                const aTotal = parseInt(a.children[1].textContent);
                const bTotal = parseInt(b.children[1].textContent);
                return bTotal - aTotal;
            });
            userItemsContainer.innerHTML = '';
            for (const row of rows) {
                userItemsContainer.appendChild(row);
            }
        }

        // Event listeners for each class button
        document.getElementById('class1Btn').addEventListener('click', () => loadData(SS1));
        document.getElementById('class2Btn').addEventListener('click', () => loadData(SS2));
        document.getElementById('class3Btn').addEventListener('click', () => loadData(SS3));
        document.getElementById('class4Btn').addEventListener('click', () => loadData(SS4));
        document.getElementById('class5Btn').addEventListener('click', () => loadData(SS5));
        document.getElementById('class6Btn').addEventListener('click', () => loadData(SS6));
        document.getElementById('class7Btn').addEventListener('click', () => loadData(SS7));
        document.getElementById('class8Btn').addEventListener('click', () => loadData(SS8));
        document.getElementById('class9Btn').addEventListener('click', () => loadData(SS9));
        document.getElementById('class10Btn').addEventListener('click', () => loadData(SS10));
        document.getElementById('class11Btn').addEventListener('click', () => loadData(SS11));
        document.getElementById('class12Btn').addEventListener('click', () => loadData(SS12));
        document.getElementById('class13Btn').addEventListener('click', () => loadData(SS13));
        document.getElementById('class14Btn').addEventListener('click', () => loadData(all));

        // Event listeners for sorting buttons
        sortTodayBtn.addEventListener('click', sortTableByToday);
        sortTotalBtn.addEventListener('click', sortTableByTotal);

        // Load data for the default class on page load
        window.onload = () => loadData(ss8);
    </script>
</body>

</html>
